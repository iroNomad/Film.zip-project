<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>Title</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css">

  <style>
    .gradient-custom {
      background: #6a11cb;
      background: -webkit-linear-gradient(to right, rgba(106, 17, 203, 1), rgba(37, 117, 252, 1));
      background: linear-gradient(to right, rgba(106, 17, 203, 1), rgba(37, 117, 252, 1))
    }

    .mb-2 img {
      width: 200px; /* 버튼 너비 */
      height: auto; /* 자동 비율 유지 */
      margin: 10px 0; /* 버튼 사이 간격 */
    }

    .mb-2 a {
      display: inline-block; /* 이미지 버튼 간격 유지 */
    }
  </style>
</head>
<body class="gradient-custom">
<section class="d-flex vh-100">
  <div class="container-fluid row justify-content-center align-content-center">
    <div class="card bg-dark" style="border-radius: 1rem;">
      <div class="card-body p-5 text-center">
        <h2 class="text-white">LOGIN</h2>
        <p class="text-white-50 mt-2 mb-5">서비스 사용을 위해 로그인을 해주세요!</p>

        <div class = "mb-2">
          <form action="/login" method="POST" id="loginForm">
            <input type="hidden" th:name="${_csrf?.parameterName}" th:value="${_csrf?.token}" />
            <div class="mb-3">
              <label class="form-label text-white">Email address</label>
              <input type="email" class="form-control" name="username" id="username">
              <small id="emailHelp" class="form-text text-danger"></small>
            </div>
            <div class="mb-3">
              <label class="form-label text-white">Password</label>
              <input type="password" class="form-control" name="password" id="password">
              <small id="passwordHelp" class="form-text text-danger"></small>
            </div>
            <button type="submit" class="btn btn-primary">Submit</button>
          </form>

          <button type="button" class="btn btn-secondary mt-3" onclick="location.href='/signup'">회원가입</button>
          <br/>
          <br/>

          <a href="/oauth2/authorization/google">
            <img src="/img/google.png">
          </a>
          <br/>
          <a href="/oauth2/authorization/naver">
            <img src="/img/naver.png">
          </a>
          <br/>
          <a href="/oauth2/authorization/kakao">
            <img src="/img/kakao.png">
          </a>
        </div>
      </div>
    </div>
  </div>
</section>

<script>
  document.getElementById('loginForm').addEventListener('submit', function (e) {
    let isValid = true;

    // 입력 필드 값 가져오기
    const email = document.getElementById('username');
    const password = document.getElementById('password');

    // 오류 메시지 영역 가져오기
    const emailHelp = document.getElementById('emailHelp');
    const passwordHelp = document.getElementById('passwordHelp');

    // 오류 메시지 초기화 함수
    function clearAllErrorMessages() {
      emailHelp.textContent = '';
      passwordHelp.textContent = '';
    }

    // 이메일 검증
    if (email.value.trim() === '') {
      clearAllErrorMessages();
      emailHelp.textContent = '이메일 주소는 필수 항목입니다.';
      isValid = false;
      // 비밀번호 검증
    } else if (password.value.trim() === '') {
      clearAllErrorMessages();
      passwordHelp.textContent = '비밀번호는 필수 항목입니다.';
      isValid = false;
      // 모든 검증 성공시
    } else {
      clearAllErrorMessages();
    }

    // 유효성 검사 실패 시 폼 제출 방지
    if (!isValid) {
      e.preventDefault();
    }
  });
</script>
</body>
</html>